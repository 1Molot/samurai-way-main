"use strict";(self.webpackChunkreact_way_of_samurai=self.webpackChunkreact_way_of_samurai||[]).push([[537],{2537:function(s,t,e){e.r(t),e.d(t,{default:function(){return X}});var r=e(5671),a=e(3144),o=e(136),i=e(2882),n=e(2791),u="ProfileInfo_descriptionBlock__AgFpy",l="ProfileInfo_mainPhoto__Aa5k7",p="ProfileInfo_button__4THij",h=e(6443),d=e(885),f=e(184),c=function(s){var t=(0,n.useState)(!1),e=(0,d.Z)(t,2),r=e[0],a=e[1],o=(0,n.useState)(s.status),i=(0,d.Z)(o,2),u=i[0],l=i[1];(0,n.useEffect)((function(){l(s.status)}),[s.status]);return(0,f.jsxs)(f.Fragment,{children:[!r&&(0,f.jsx)("div",{children:(0,f.jsx)("span",{onDoubleClick:function(){a(!0)},children:s.status||"---"})}),r&&(0,f.jsx)("div",{children:(0,f.jsx)("input",{onChange:function(s){l(s.currentTarget.value)},autoFocus:!0,onBlur:function(){a(!1),s.updateStatus(u)},value:u})})]})},A=function(s){if(!s.profile)return(0,f.jsx)(h.Z,{});return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:u,children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("img",{src:s.profile.photos.large||"data:image/png;base64,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",className:l}),s.isOwner&&(0,f.jsx)("label",{htmlFor:"load_avatar",children:(0,f.jsx)("div",{className:p,children:"image"})}),(0,f.jsx)("input",{id:"load_avatar",hidden:!0,type:"file",onChange:function(t){var e=t.currentTarget.files;e&&e.length&&s.savePhoto(e[0])}})]}),(0,f.jsx)(c,{status:s.status,updateStatus:s.updateStatus})]})})},P="MyPosts_postsBlock__r5Ws7",m="MyPosts_posts__ZJfWZ",g="Post_item__DLbbI",j=function(s){return(0,f.jsxs)("div",{className:g,children:[(0,f.jsx)("img",{src:"https://oper.ru/static/data/gallery/l1048753984.jpg"}),s.message,(0,f.jsxs)("div",{children:[(0,f.jsx)("span",{children:"like"})," ",s.likesCount]})]})},x=e(6139),v=e(704),B=e(3079),w=e(8918),D=(0,v.Z)({form:"ProfileAddNewPostForm"})((function(s){var t=(0,n.useMemo)((function(){return(0,B.D)(10)}),[]);return(0,f.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,f.jsx)("div",{children:(0,f.jsx)(x.Z,{component:w.g,name:"newPostText",placeholder:"Post Message",validate:[B.C,t]})}),(0,f.jsx)("div",{children:(0,f.jsx)("button",{children:"Add post"})})]})})),b=n.memo((function(s){var t=s.posts.map((function(s){return(0,f.jsx)(j,{message:s.message,likesCount:s.likesCont},s.id)}));return(0,f.jsxs)("div",{className:P,children:[(0,f.jsx)("h3",{children:"My posts"}),(0,f.jsx)(D,{onSubmit:function(t){s.addPost(t.newPostText)}}),(0,f.jsx)("div",{className:m,children:t})]})})),E=e(364),M=e(81),S=(0,E.$j)((function(s){return{posts:s.profilePage.posts}}),(function(s){return{addPost:function(t){s((0,M.Wl)(t))}}}))(b),U=function(s){return(0,f.jsxs)("div",{children:[(0,f.jsx)(A,{savePhoto:s.savePhoto,isOwner:s.isOwner,profile:s.profile,status:s.status,updateStatus:s.updateStatus}),(0,f.jsx)(S,{})]})},Z=e(9271),F=e(7781),k=function(s){(0,o.Z)(e,s);var t=(0,i.Z)(e);function e(){var s;(0,r.Z)(this,e);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(s=t.call.apply(t,[this].concat(o))).userId=null,s}return(0,a.Z)(e,[{key:"refreshProfile",value:function(){this.userId=this.props.match.params.userId,this.userId||(this.userId=String(this.props.authorizedUserId),this.userId||this.props.history.push("login")),this.props.getFriendsProfile(),this.props.getUserProfile(this.userId),this.props.getStatus(this.userId)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(s,t,e){this.props.match.params.userId!==s.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,f.jsx)("div",{children:(0,f.jsx)(U,{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto})})}}]),e}(n.Component),X=(0,F.qC)((0,E.$j)((function(s){return{profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:s.auth.userId,isAuth:s.auth.isAuth,friends:s.profilePage.friends}}),{getUserProfile:M.et,getStatus:M.lR,updateStatus:M.Nf,getFriendsProfile:M._Z,savePhoto:M.Ju}),Z.EN)(k)}}]);
//# sourceMappingURL=537.0755883f.chunk.js.map